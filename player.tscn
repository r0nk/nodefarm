[gd_scene load_steps=15 format=4 uid="uid://b7v7ddihhufc3"]

[ext_resource type="Script" path="res://player.gd" id="1"]
[ext_resource type="Script" path="res://HUD.gd" id="2_3y5t6"]
[ext_resource type="Script" path="res://rifle.gd" id="2_tf0d1"]
[ext_resource type="AudioStream" uid="uid://1adwfsldpeqs" path="res://sfx/snap.ogg" id="3_aa11l"]
[ext_resource type="Script" path="res://hammer.gd" id="4_fa86n"]
[ext_resource type="AudioStream" uid="uid://c7iqm4cxcu18h" path="res://sfx/pew.ogg" id="5_qlpic"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_16gqa"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_nu4c1"]
noise = SubResource("FastNoiseLite_16gqa")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vx1xm"]
albedo_color = Color(0.627451, 0.627451, 0.627451, 1)
albedo_texture = SubResource("NoiseTexture2D_nu4c1")
metallic = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7xiux"]
albedo_color = Color(1, 0.552941, 0, 1)
albedo_texture = SubResource("NoiseTexture2D_nu4c1")

[sub_resource type="ArrayMesh" id="ArrayMesh_xujob"]
_surfaces = [{
"aabb": AABB(-0.254828, -0.139421, -0.140992, 0.509667, 0.278852, 0.281994),
"attribute_data": PackedByteArray("AAAAAAAAAAAAAAAAAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AAAAAAAAAAAAAAAAXi2mPn+BGD8AAAAAAAAAAAAAAAAAAIA/AAAAAAAAgD9J16Y+bx0ZP14tpj5/gRg/AAAAAAAAgD8AAIA/AACAP0nXpj5vHRk/SdemPm8dGT8AAIA/AACAP2wdGT9sHRk/J8XNPifFzT4AAAAAAAAAAEl+pT6Orc0+AAAAAAAAAABeLaY+f4EYP0l+pT6Orc0+AACAPwAAgD8AAIA/AAAAAIRkLT9sHRk/bB0ZP2wdGT8AAIA/AACAP4RkLT9sHRk/AACAPwAAAAAAAAAAAAAAAF6ULD8nxc0+AZcsP+IKzz6EZC0/bB0ZPwAAgD8AAAAAAACAPwAAAABelCw/J8XNPgGXLD/iCs8+J8XNPifFzT5elCw/J8XNPgAAAAAAAAAAAAAAAAAAAAAAAAAAAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AAAAAAAAAAAAAAAA"),
"format": 34359738391,
"material": SubResource("StandardMaterial3D_vx1xm"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 66,
"vertex_data": PackedByteArray("4XiCPnDEDj41YBA+4XiCPnDEDj41YBC+4XiCPnDEDr41YBC+4XiCPnDEDr41YBC+4XiCPnDEDr41YBA+4XiCPnDEDj41YBA+4XiCPnDEDj41YBA+4XiCvnDEDj41YBA+4XiCvnDEDj41YBC+4XiCvnDEDj41YBC+4XiCPnDEDj41YBC+4XiCPnDEDj41YBA+4XiCPnDEDj41YBA+4XiCPnDEDr41YBA+4XiCvnDEDr41YBA+4XiCvnDEDr41YBA+4XiCvnDEDj41YBA+4XiCPnDEDj41YBA+4XiCvnDEDj41YBC+4XiCvnDEDj41YBA+4XiCvnDEDr41YBA+4XiCvnDEDr41YBA+4XiCvnDEDr41YBC+4XiCvnDEDj41YBC+sCFJPXDEDr7MzEw94XiCvnDEDr41YBA+4XiCPnDEDr41YBA+4XiCPnDEDr41YBA+0MxMPXDEDr6sIUk9sCFJPXDEDr7MzEw94XiCPnDEDr41YBA+4XiCPnDEDr41YBC+0MxMPXDEDr6sIUk90MxMPXDEDr6sIUk94XiCPnDEDr41YBC+0MxMPXDEDr7Qn+K8zMxMvXDEDr7Qn+I84XiCvnDEDr41YBA+zMxMvXDEDr7MzEw94XiCvnDEDr41YBA+sCFJPXDEDr7MzEw9zMxMvXDEDr7MzEw94XiCPnDEDr41YBC+4XiCvnDEDr41YBC+zMxMPXDEDr7MzEy90MxMPXDEDr7Qn+K84XiCPnDEDr41YBC+zMxMPXDEDr7MzEy94XiCvnDEDr41YBC+4XiCvnDEDr41YBA+0MxMvXDEDr6sIUm9qCFJvXDEDr7MzEy9zMxMPXDEDr7MzEy94XiCvnDEDr41YBC+4XiCvnDEDr41YBC+0MxMvXDEDr6sIUm9qCFJvXDEDr7MzEy9zMxMvXDEDr7Qn+I80MxMvXDEDr6sIUm94XiCvnDEDr41YBA+4XiCPnDEDr41YBC+4XiCPnDEDj41YBC+4XiCvnDEDj41YBC+4XiCvnDEDj41YBC+4XiCvnDEDr41YBC+4XiCPnDEDr41YBC+////f/9//n////9//3/+f////3//f/5/////f/9//n////9//3/+f////3//f/5//3//////AAD/f/////8AAP9//////wAA/3//////AAD/f/////8AAP9//////wAA/3//fwAA/z//f/9/AAD/P/9//38AAP8//3//fwAA/z//f/9/AAD/P/9//38AAP8/AAD/f/9//n8AAP9//3/+fwAA/3//f/5/AAD/f/9//n8AAP9//3/+fwAA/3//f/5//38AAAAA3wP/fwAA//8BAP9/AAD//wMA/38AAP//AwD/fwAAAAAyBv9/AAAAAN8D/38AAP//AwD/fwAA//8AAP9/AAAAADIG/38AAAAAMgb/fwAA//8AAP9/AAD//wAA/38AAAAAFgD/fwAA//8BAP9/AAAAAEMA/38AAP//AQD/fwAAAADfA/9/AAAAAEMA/38AAP//AAD/fwAA//8DAP9/AAD//wwA/38AAP//AAD/fwAA//8AAP9/AAD//wwA/38AAP//AwD/fwAA//8BAP9/AAAAAAAH/38AAAAABQT/fwAA//8MAP9/AAD//wMA/38AAP//AwD/fwAAAAAAB/9/AAAAAAUE/38AAAAAFgD/fwAAAAAAB/9/AAD//wEA/////wAA/z//////AAD/P/////8AAP8//////wAA/z//////AAD/P/////8AAP8/")
}, {
"aabb": AABB(-0.05, -0.932256, -0.05, 0.10001, 0.792845, 0.1),
"attribute_data": PackedByteArray("Kb0SPAAAgD8AAIA/AACAPyq9Ejzw0UY/Kr0SPPDRRj8AAIA/AACAP0C9EjxAvRI8AACAPwAAgD8AAIA/AAAAAAC9EjwAAAAAAAAAACm9EjwAAAAAAACAPwAAgD8AAIA//7wSPP+8EjwAAIA/AACAPwAAgD8AvRI8Kb0SPAAAgD8AAIA/AACAPyi9Ejzy0UY/KL0SPPLRRj8AAIA/AACAP0C9EjxAvRI8AACAPwAAgD8AAIA/AAAAAAC9EjwAAAAAAAAAAAAAAAAAAAAAAACAPwAAgD8AAIA/AACAPwAAgD8AAIA/AAAAAAAAAAAAAAAADLV9Pwy1fT8AAAAAAAAAAAAAAAAMtX0/AACAPwu1fT8AAIA/AAAAAAAAAAAAAAAA"),
"format": 34359738391,
"material": SubResource("StandardMaterial3D_7xiux"),
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 36,
"vertex_data": PackedByteArray("zMxMPXDEDr7MzEy9zcxMPViobr/NzEy90MxMPXDEDr7Qn+K80MxMPXDEDr7Qn+K8zcxMPViobr/NzEy90MxMPXDEDr6sIUk9zcxMPViobr/NzEy9zcxMPViobr/NzEw9zcxMPXDEDr7NzEw9zcxMPXDEDr7NzEw9zcxMPViobr/NzEw9zcxMvViobr/NzEw9sCFJPXDEDr7MzEw9zcxMvViobr/NzEw9zMxMvXDEDr7MzEw9zMxMvXDEDr7MzEw9zcxMvViobr/NzEw9zMxMvXDEDr7Qn+I8zMxMvXDEDr7Qn+I8zcxMvViobr/NzEw90MxMvXDEDr6sIUm9zcxMvViobr/NzEw9zcxMvViobr/NzEy9zcxMvXDEDr7NzEy9zcxMvViobr/NzEw9zcxMPViobr/NzEw9zcxMPViobr/NzEy9zcxMPViobr/NzEy9zcxMvViobr/NzEy9zcxMvViobr/NzEw9qCFJvXDEDr7MzEy9zcxMPViobr/NzEy9zMxMPXDEDr7MzEy9zcxMvXDEDr7NzEy9zcxMvViobr/NzEy9zcxMPViobr/NzEy9////f/9//n////9//3/+f////3//f/5/////f/9//n////9//3/+f////3//f/5/////f/9//n////9//3/+f////3//f/5//3//fwAA/z//f/9/AAD/P/9//38AAP8//3//fwAA/z//f/9/AAD/P/9//38AAP8/AAD/f/9//n8AAP9//3/+fwAA/3//f/5/AAD/f/9//n8AAP9//3/+fwAA/3//f/5/AAD/f/9//n8AAP9//3/+fwAA/3//f/5//38AAP//AAD/fwAA//8AAP9/AAD//wAA/38AAP//AAD/fwAA//8AAP9/AAD//wAA/////wAA/z//////AAD/P/////8AAP8//////wAA/z//////AAD/P/////8AAP8/")
}]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qpo0g"]
shading_mode = 0
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_x3o0q"]
size = Vector3(0.2, 200, 0.2)

[sub_resource type="CapsuleShape3D" id="3"]
radius = 0.490116
height = 3.0

[node name="player" type="CharacterBody3D" groups=["player"]]
script = ExtResource("1")

[node name="camera" type="Camera3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 9.53674e-07, 2.10365, 5.96046e-08)
cull_mask = 2148532223
current = true
fov = 90.0
far = 10000.0

[node name="HUD" type="CanvasLayer" parent="camera"]
script = ExtResource("2_3y5t6")

[node name="sights" type="Node2D" parent="camera/HUD"]
visible = false

[node name="Line2D" type="Line2D" parent="camera/HUD/sights"]
z_index = 3
position = Vector2(-533, -274)
rotation = -1.23279
points = PackedVector2Array(-246.863, 145.068, -85.7383, 592.219, -69.3421, 637.722, 98.5878, 1103.76)
default_color = Color(0, 0, 0, 1)

[node name="Line2D2" type="Line2D" parent="camera/HUD/sights"]
z_index = 3
position = Vector2(-535, -274)
points = PackedVector2Array(546, 655, 537, -22)
default_color = Color(0, 0, 0, 1)

[node name="Polygon2D" type="Polygon2D" parent="camera/HUD/sights/Line2D2"]
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(110, 599, 367, 704, 576, 693, 903, 623, 1101, 527, 1141, 265, 1076, 44, 858, -134, 627, -187, 263, -173, 54.9999, -102, -132, 25, -101, 270, -24.0001, 451, 67.9999, 574, -417, 1260, -694, 615, -564, -81, -366, -383, 279, -389, 978, -395, 1467, -338, 1767, -242, 2010, 103, 2013, 519, 2013, 827, 1934, 1062, 1775, 1229, 1150, 1379, 814, 1387, 251, 1410, -148, 1396, -369, 1351, -380, 1271)

[node name="Polygon2D" type="Polygon2D" parent="camera/HUD/sights/Line2D2/Polygon2D"]
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(-35.0001, 471, 146, 660, -380, 1365, -516, 1229)

[node name="crosshair" type="Polygon2D" parent="camera/HUD"]
position = Vector2(-5.96046e-08, 5.96046e-08)
scale = Vector2(2, 2)
color = Color(1, 0, 0, 1)
polygon = PackedVector2Array(0, -1, 1, 0, 0, 1, -1, 0)

[node name="status" type="RichTextLabel" parent="camera/HUD"]
offset_left = 6.0
offset_top = 158.0
offset_right = 932.0
offset_bottom = 678.0

[node name="undercross" type="RichTextLabel" parent="camera/HUD"]
offset_left = 735.0
offset_top = 574.0
offset_right = 1188.0
offset_bottom = 797.0
text = "
"

[node name="interact_cast" type="RayCast3D" parent="camera"]
target_position = Vector3(0, 0, -4000)
collision_mask = 2
collide_with_areas = true

[node name="sfx" type="AudioStreamPlayer" parent="camera/interact_cast"]
stream = ExtResource("3_aa11l")

[node name="hammer" type="Node3D" parent="camera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.13498, -0.137537, -2.30578)
visible = false
script = ExtResource("4_fa86n")

[node name="cast" type="RayCast3D" parent="camera/hammer"]
target_position = Vector3(0, 0, -20)

[node name="CSGBox3D" type="MeshInstance3D" parent="camera/hammer"]
transform = Transform3D(0.0994945, 0.451044, -0.886939, 0.0273341, 0.889787, 0.455558, 0.994663, -0.0695692, 0.0762, 0.758757, -0.297001, 1.29425)
mesh = SubResource("ArrayMesh_xujob")

[node name="rifle" type="CSGBox3D" parent="camera"]
transform = Transform3D(0.999841, -1.54521e-09, 0.0178538, 0.000318136, 0.999841, -0.017816, -0.0178509, 0.0178189, 0.999682, 0.5021, -0.65926, -0.842095)
size = Vector3(0.154796, 0.225773, 1)
script = ExtResource("2_tf0d1")

[node name="sight" type="CSGBox3D" parent="camera/rifle"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.96046e-08, 0.0513422, -0.460795)
size = Vector3(0.0310372, 0.225773, 0.0497531)

[node name="laser_body" type="CSGBox3D" parent="camera/rifle"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.32458e-06, -0.0107685, -25.3695)
size = Vector3(0.068, 0.244, 50)
material = SubResource("StandardMaterial3D_qpo0g")

[node name="ray" type="ShapeCast3D" parent="camera/rifle"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 8.70228e-06, 0, -99.6683)
shape = SubResource("BoxShape3D_x3o0q")
collide_with_areas = true
collide_with_bodies = false

[node name="fire_sfx" type="AudioStreamPlayer3D" parent="camera/rifle"]
transform = Transform3D(1, -4.65661e-10, -6.70552e-08, 0, 1, -6.51926e-08, -3.72529e-09, -3.72529e-09, 1, 0.0104026, -0.0103838, -0.58256)
stream = ExtResource("5_qlpic")
volume_db = -20.0

[node name="cs" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.657689, 0)
shape = SubResource("3")
