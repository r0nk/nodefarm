[gd_scene load_steps=13 format=3 uid="uid://b7v7ddihhufc3"]

[ext_resource type="Script" path="res://player.gd" id="1"]
[ext_resource type="Script" path="res://HUD.gd" id="2_3y5t6"]
[ext_resource type="Script" path="res://rifle.gd" id="2_tf0d1"]
[ext_resource type="Script" path="res://addons/gloot/ctrl_inventory_grid.gd" id="2_tyb6u"]
[ext_resource type="Script" path="res://addons/gloot/inventory_grid.gd" id="3_agli8"]
[ext_resource type="Script" path="res://addons/gloot/item_protoset.gd" id="4_t4tf4"]
[ext_resource type="Script" path="res://addons/gloot/inventory_item.gd" id="5_44q0f"]

[sub_resource type="Gradient" id="Gradient_34f6l"]
colors = PackedColorArray(0, 0, 0, 1, 0.316706, 0.316706, 0.316706, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_mwgos"]
gradient = SubResource("Gradient_34f6l")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qpo0g"]
shading_mode = 0
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="CapsuleShape3D" id="3"]
radius = 0.490116
height = 3.0

[sub_resource type="Resource" id="Resource_7moeu"]
script = ExtResource("4_t4tf4")
json_data = "[
    {
        \"id\": \"minimal_item\",
        \"image\": \"icon.png\"
    }
]"

[node name="player" type="CharacterBody3D" groups=["player"]]
script = ExtResource("1")

[node name="camera" type="Camera3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 9.53674e-07, 2.10365, 5.96046e-08)
cull_mask = 2148532223
current = true
fov = 90.0
far = 10000.0

[node name="HUD" type="CanvasLayer" parent="camera"]
script = ExtResource("2_3y5t6")

[node name="sights" type="Node2D" parent="camera/HUD"]
visible = false

[node name="Line2D" type="Line2D" parent="camera/HUD/sights"]
z_index = 3
position = Vector2(-533, -274)
rotation = -1.23279
points = PackedVector2Array(-246.863, 145.068, -85.7383, 592.219, -69.3421, 637.722, 98.5878, 1103.76)
default_color = Color(0, 0, 0, 1)

[node name="Line2D2" type="Line2D" parent="camera/HUD/sights"]
z_index = 3
position = Vector2(-535, -274)
points = PackedVector2Array(546, 655, 537, -22)
default_color = Color(0, 0, 0, 1)

[node name="Polygon2D" type="Polygon2D" parent="camera/HUD/sights/Line2D2"]
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(110, 599, 367, 704, 576, 693, 903, 623, 1101, 527, 1141, 265, 1076, 44, 858, -134, 627, -187, 263, -173, 54.9999, -102, -132, 25, -101, 270, -24.0001, 451, 67.9999, 574, -417, 1260, -694, 615, -564, -81, -366, -383, 279, -389, 978, -395, 1467, -338, 1767, -242, 2010, 103, 2013, 519, 2013, 827, 1934, 1062, 1775, 1229, 1150, 1379, 814, 1387, 251, 1410, -148, 1396, -369, 1351, -380, 1271)

[node name="Polygon2D" type="Polygon2D" parent="camera/HUD/sights/Line2D2/Polygon2D"]
color = Color(0, 0, 0, 1)
polygon = PackedVector2Array(-35.0001, 471, 146, 660, -380, 1365, -516, 1229)

[node name="crosshair" type="Polygon2D" parent="camera/HUD"]
position = Vector2(-5.96046e-08, 5.96046e-08)
scale = Vector2(2, 2)
color = Color(1, 0, 0, 1)
polygon = PackedVector2Array(0, -1, 1, 0, 0, 1, -1, 0)

[node name="status" type="RichTextLabel" parent="camera/HUD"]
offset_left = 6.0
offset_top = 158.0
offset_right = 932.0
offset_bottom = 678.0

[node name="undercross" type="RichTextLabel" parent="camera/HUD"]
offset_left = 735.0
offset_top = 574.0
offset_right = 1188.0
offset_bottom = 797.0
text = "
"

[node name="inventory" type="Control" parent="camera/HUD"]
custom_minimum_size = Vector2(320, 320)
layout_mode = 3
anchors_preset = 0
offset_left = 623.0
offset_top = 100.0
offset_right = 943.0
offset_bottom = 420.0
script = ExtResource("2_tyb6u")
inventory_path = NodePath("../../../InventoryGrid")

[node name="NinePatchRect" type="NinePatchRect" parent="camera/HUD/inventory"]
z_index = -1
layout_mode = 0
offset_right = 326.0
offset_bottom = 325.0
texture = SubResource("GradientTexture1D_mwgos")

[node name="interact_cast" type="RayCast3D" parent="camera"]
target_position = Vector3(0, 0, -4000)

[node name="rifle" type="CSGBox3D" parent="camera"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5021, -0.65926, -0.842095)
size = Vector3(0.154796, 0.225773, 1)
script = ExtResource("2_tf0d1")

[node name="sight" type="CSGBox3D" parent="camera/rifle"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.96046e-08, 0.0513422, -0.460795)
size = Vector3(0.0310372, 0.225773, 0.0497531)

[node name="laser_body" type="CSGBox3D" parent="camera/rifle"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.32458e-06, -0.0107685, -25.3695)
visible = false
size = Vector3(0.068, 0.244, 50)
material = SubResource("StandardMaterial3D_qpo0g")

[node name="ray" type="RayCast3D" parent="camera/rifle"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 5.96046e-08, 0, -0.488235)
target_position = Vector3(0, -100, 0)
collide_with_areas = true
collide_with_bodies = false

[node name="cs" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.657689, 0)
shape = SubResource("3")

[node name="InventoryGrid" type="Node" parent="."]
script = ExtResource("3_agli8")
item_protoset = SubResource("Resource_7moeu")

[node name="InventoryItem" type="Node" parent="InventoryGrid"]
script = ExtResource("5_44q0f")
protoset = SubResource("Resource_7moeu")
prototype_id = "minimal_item"

[node name="minimal_item" type="Node" parent="InventoryGrid"]
script = ExtResource("5_44q0f")
protoset = SubResource("Resource_7moeu")
prototype_id = "minimal_item"
properties = {
"grid_position": Vector2(1, 1)
}
